<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #a9b7c6;}
.s1 { color: #cc7832;}
.s2 { color: #a9b7c6;}
.s3 { color: #6a8759;}
.s4 { color: #9876aa; font-style: italic;}
.s5 { color: #287bde;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
README.md</font>
</center></td></tr></table>
<pre><span class="s0">&lt;div style=&quot;text-align: center;font-size: xxx-large&quot; &gt;Hypium&lt;/div&gt;</span>
<span class="s0">&lt;div style=&quot;text-align: center&quot;&gt;A unit test framework for OpenHarmonyOS application&lt;/div&gt;</span>

<span class="s1">## </span><span class="s2">Hypium是什么?</span>
<span class="s1">***</span>
<span class="s1">- </span><span class="s2">Hypium是OpenHarmony上的测试框架，提供测试用例编写、执行、结果显示能力，用于OpenHarmony系统应用接口以及应用界面测试。</span>
<span class="s1">- </span><span class="s2">Hypium结构化模型：hypium工程主要由List.test.js与TestCase.test.js组成。</span>
<span class="s1">```</span>
<span class="s3">rootProject                  // Hypium工程根目录</span>
<span class="s3">├── moduleA</span>
<span class="s3">│   ├── src</span>
<span class="s3">│      ├── main                   // 被测试应用目录</span>
<span class="s3">│      ├── ohosTest               // 测试用例目录</span>
<span class="s3">│         ├── js/ets</span>
<span class="s3">│            └── test</span>
<span class="s3">│               └── List.test.js      // 测试用例加载脚本，ets目录下为.ets后缀</span>
<span class="s3">│               └── TestCase.test.js  // 测试用例脚本，ets目录下为.ets后缀</span>
<span class="s3">└── moduleB</span>
    <span class="s3">...</span>
<span class="s3">│               └── List.test.js      // 测试用例加载脚本，ets目录下为.ets后缀</span>
<span class="s3">│               └── TestCase.test.js  // 测试用例脚本，ets目录下为.ets后缀</span>
<span class="s1">```</span>

<span class="s1">## </span><span class="s2">安装使用</span>
<span class="s1">***</span>
<span class="s1">- </span><span class="s2">在DevEco Studio内使用Hypium</span>
<span class="s1">- </span><span class="s2">工程级package.json内配置</span><span class="s0">:</span>
<span class="s1">```</span><span class="s4">json</span>
<span class="s3">&quot;dependencies&quot;: {</span>
    <span class="s3">&quot;@ohos/hypium&quot;: &quot;1.0.6&quot;</span>
<span class="s3">}</span>
<span class="s1">```</span>
<span class="s2">注：</span>
<span class="s2">hypium服务于OpenHarmonyOS应用对外接口测试、系统对外接口测试（SDK中接口），完成HAP自动化测试。详细指导：</span>
<span class="s0">[</span><span class="s2">Deveco Studio</span><span class="s0">](</span><span class="s5">https://developer.harmonyos.com/cn/develop/deveco-studio</span><span class="s0">)</span>

<span class="s1">#### </span><span class="s2">通用语法</span>

<span class="s1">- </span><span class="s2">测试用例采用业内通用语法，describe代表一个测试套， it代表一条用例。</span>

<span class="s1">| </span><span class="s0">No. </span><span class="s1">| </span><span class="s0">API        </span><span class="s1">| </span><span class="s0">功能说明                                                                                                               </span><span class="s1">|</span>
<span class="s1">| --- | ---------- | ---------------------------------------------------------------------------------------------------------------------- |</span>
<span class="s1">| </span><span class="s0">1   </span><span class="s1">| </span><span class="s0">describe   </span><span class="s1">| </span><span class="s0">定义一个测试套，支持两个参数：测试套名称和测试套函数                                                                   </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">2   </span><span class="s1">| </span><span class="s0">beforeAll  </span><span class="s1">| </span><span class="s0">在测试套内定义一个预置条件，在所有测试用例开始前执行且仅执行一次，支持一个参数：预置动作函数                           </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">3   </span><span class="s1">| </span><span class="s0">beforeEach </span><span class="s1">| </span><span class="s0">在测试套内定义一个单元预置条件，在每条测试用例开始前执行，执行次数与it定义的测试用例数一致，支持一个参数：预置动作函数 </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">4   </span><span class="s1">| </span><span class="s0">afterEach  </span><span class="s1">| </span><span class="s0">在测试套内定义一个单元清理条件，在每条测试用例结束后执行，执行次数与it定义的测试用例数一致，支持一个参数：清理动作函数 </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">5   </span><span class="s1">| </span><span class="s0">afterAll   </span><span class="s1">| </span><span class="s0">在测试套内定义一个清理条件，在所有测试用例结束后执行且仅执行一次，支持一个参数：清理动作函数                           </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">6   </span><span class="s1">| </span><span class="s0">it         </span><span class="s1">| </span><span class="s0">定义一条测试用例，支持三个参数：用例名称，过滤参数和用例函数                                                           </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">7   </span><span class="s1">| </span><span class="s0">expect     </span><span class="s1">| </span><span class="s0">支持bool类型判断等多种断言方法                                                                                         </span><span class="s1">|</span>

<span class="s1">#### </span><span class="s2">断言库</span>

<span class="s1">- </span><span class="s2">示例代码：</span>

<span class="s1">```</span><span class="s4">javascript</span>
  <span class="s3">expect(${actualvalue}).assertX(${expectvalue})</span>
<span class="s1">```</span>

<span class="s1">- </span><span class="s2">断言功能列表：</span>

<span class="s1">| </span><span class="s0">No.  </span><span class="s1">| </span><span class="s0">API                              </span><span class="s1">| </span><span class="s0">功能说明                                                                                       </span><span class="s1">|</span>
<span class="s1">| :--- | :------------------------------- | ---------------------------------------------------------------------------------------------- |</span>
<span class="s1">| </span><span class="s0">1    </span><span class="s1">| </span><span class="s0">assertClose                      </span><span class="s1">| </span><span class="s0">检验actualvalue和expectvalue(0)的接近程度是否是expectValue(1)                                  </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">2    </span><span class="s1">| </span><span class="s0">assertContain                    </span><span class="s1">| </span><span class="s0">检验actualvalue中是否包含expectvalue                                                           </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">3    </span><span class="s1">| </span><span class="s0">assertDeepEquals                 </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue和expectvalue(0)是否是同一个对象                                    </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">4    </span><span class="s1">| </span><span class="s0">assertEqual                      </span><span class="s1">| </span><span class="s0">检验actualvalue是否等于expectvalue[0]                                                          </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">5    </span><span class="s1">| </span><span class="s0">assertFail                       </span><span class="s1">| </span><span class="s0">抛出一个错误                                                                                   </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">6    </span><span class="s1">| </span><span class="s0">assertFalse                      </span><span class="s1">| </span><span class="s0">检验actualvalue是否是false                                                                     </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">7    </span><span class="s1">| </span><span class="s0">assertTrue                       </span><span class="s1">| </span><span class="s0">检验actualvalue是否是true                                                                      </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">8    </span><span class="s1">| </span><span class="s0">assertInstanceOf                 </span><span class="s1">| </span><span class="s0">检验actualvalue是否是expectvalue类型                                                           </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">9    </span><span class="s1">| </span><span class="s0">assertLarger                     </span><span class="s1">| </span><span class="s0">检验actualvalue是否大于expectvalue                                                             </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">10   </span><span class="s1">| </span><span class="s0">assertLess                       </span><span class="s1">| </span><span class="s0">检验actualvalue是否小于expectvalue                                                             </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">11   </span><span class="s1">| </span><span class="s0">assertNaN                        </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue是否是NaN                                                           </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">12   </span><span class="s1">| </span><span class="s0">assertNegUnlimited               </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue是否等于Number.NEGATIVE_INFINITY                                    </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">13   </span><span class="s1">| </span><span class="s0">assertNull                       </span><span class="s1">| </span><span class="s0">检验actualvalue是否是null                                                                      </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">14   </span><span class="s1">| </span><span class="s0">assertPosUnlimited               </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue是否等于Number.POSITIVE_INFINITY                                    </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">15   </span><span class="s1">| </span><span class="s0">assertPromiseIsPending           </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue是否处于Pending状态【actualvalue为promse对象】                      </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">16   </span><span class="s1">| </span><span class="s0">assertPromiseIsRejected          </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue是否处于Rejected状态【同15】                                        </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">17   </span><span class="s1">| </span><span class="s0">assertPromiseIsRejectedWith      </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue是否处于Rejected状态，并且比较执行的结果值【同15】                  </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">18   </span><span class="s1">| </span><span class="s0">assertPromiseIsRejectedWithError </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue是否处于Rejected状态并有异常，同时比较异常的类型和message值【同15】 </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">19   </span><span class="s1">| </span><span class="s0">assertPromiseIsResolved          </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue是否处于Resolved状态【同15】                                        </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">20   </span><span class="s1">| </span><span class="s0">assertPromiseIsResolvedWith      </span><span class="s1">| </span><span class="s0">@since1.0.4 检验actualvalue是否处于Resolved状态，并且比较执行的结果值【同15】                  </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">21   </span><span class="s1">| </span><span class="s0">assertThrowError                 </span><span class="s1">| </span><span class="s0">检验actualvalue抛出Error内容是否是expectValue                                                  </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">22   </span><span class="s1">| </span><span class="s0">assertUndefined                  </span><span class="s1">| </span><span class="s0">检验actualvalue是否是undefined                                                                 </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">23   </span><span class="s1">| </span><span class="s0">not                              </span><span class="s1">| </span><span class="s0">@since1.0.4 断言结果取反                                                                       </span><span class="s1">|</span>


  <span class="s2">示例代码：</span>

<span class="s1">```</span><span class="s4">javascript</span>
  <span class="s3">import { describe, it, expect } from '@ohos/hypium';</span>

  <span class="s3">export default async function assertCloseTest() {</span>
    <span class="s3">describe('assertClose', function () {</span>
      <span class="s3">it('assertClose_success', 0, function () {</span>
        <span class="s3">let a = 100;</span>
        <span class="s3">let b = 0.1;</span>
        <span class="s3">expect(a).assertClose(99, b);</span>
      <span class="s3">})</span>
    <span class="s3">})</span>
  <span class="s3">}</span>
<span class="s1">```</span>

<span class="s1">#### </span><span class="s2">公共系统能力</span>

<span class="s1">| </span><span class="s0">No.  </span><span class="s1">| </span><span class="s0">API                                                     </span><span class="s1">| </span><span class="s0">功能描述                                                     </span><span class="s1">|</span>
<span class="s1">| ---- | ------------------------------------------------------- | ------------------------------------------------------------ |</span>
<span class="s1">| </span><span class="s0">1    </span><span class="s1">| </span><span class="s0">existKeyword(keyword: string, timeout: number): boolean </span><span class="s1">| </span><span class="s0">@since1.0.3 hilog日志中查找指定字段是否存在，keyword是待查找关键字，timeout为设置的查找时间 </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">2    </span><span class="s1">| </span><span class="s0">actionStart(tag: string): void                          </span><span class="s1">| </span><span class="s0">@since1.0.3 cmd窗口输出开始tag                               </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">3    </span><span class="s1">| </span><span class="s0">actionEnd(tag: string): void                            </span><span class="s1">| </span><span class="s0">@since1.0.3 cmd窗口输出结束tag                               </span><span class="s1">|</span>

  <span class="s2">示例代码：</span>

<span class="s1">```</span><span class="s4">javascript</span>
<span class="s3">import { describe, it, expect, SysTestKit} from '@ohos/hypium';</span>

<span class="s3">export default function existKeywordTest() {</span>
    <span class="s3">describe('existKeywordTest', function () {</span>
        <span class="s3">it('existKeyword',DEFAULT, async function () {</span>
            <span class="s3">console.info(&quot;HelloTest&quot;);</span>
            <span class="s3">let isExist = await SysTestKit.existKeyword('HelloTest');</span>
            <span class="s3">console.info('isExist ------&gt;' + isExist);</span>
        <span class="s3">})</span>
    <span class="s3">})</span>
<span class="s3">}</span>
<span class="s1">```</span>
<span class="s1">```</span><span class="s4">javascript</span>
<span class="s3">import { describe, it, expect, SysTestKit} from '@ohos/hypium';</span>

<span class="s3">export default function actionTest() {</span>
    <span class="s3">describe('actionTest', function () {</span>
        <span class="s3">it('existKeyword',DEFAULT, async function () {</span>
            <span class="s3">let tag = '[MyTest]';</span>
			<span class="s3">SysTestKit.actionStart(tag);</span>
            <span class="s3">//do something</span>
            <span class="s3">SysTestKit.actionEnd(tag);</span>
        <span class="s3">})</span>
    <span class="s3">})</span>
<span class="s3">}</span>
<span class="s1">```</span>

<span class="s1">#### </span><span class="s2">专项能力</span>

<span class="s1">- </span><span class="s2">测试用例属性筛选能力：hypium支持根据用例属性筛选执行指定测试用例，使用方式是先在测试用例上标记用例属性后，再在测试应用的启动shell命令后新增</span><span class="s0">&quot; </span><span class="s2">-s ${Key} ${Value}</span><span class="s0">&quot;</span><span class="s2">。</span>

<span class="s1">| </span><span class="s0">Key      </span><span class="s1">| </span><span class="s0">含义说明     </span><span class="s1">| </span><span class="s0">Value取值范围                                                                                                                                          </span><span class="s1">|</span>
<span class="s1">| -------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------ |</span>
<span class="s1">| </span><span class="s0">level    </span><span class="s1">| </span><span class="s0">用例级别     </span><span class="s1">| </span><span class="s0">&quot;0&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;, 例如：-s level 1                                                                                                                  </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">size     </span><span class="s1">| </span><span class="s0">用例粒度     </span><span class="s1">| </span><span class="s0">&quot;small&quot;,&quot;medium&quot;,&quot;large&quot;, 例如：-s size small                                                                                                          </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">testType </span><span class="s1">| </span><span class="s0">用例测试类型 </span><span class="s1">| </span><span class="s0">&quot;function&quot;,&quot;performance&quot;,&quot;power&quot;,&quot;reliability&quot;,&quot;security&quot;,&quot;global&quot;,&quot;compatibility&quot;,&quot;user&quot;,&quot;standard&quot;,&quot;safety&quot;,&quot;resilience&quot;, 例如：-s testType function </span><span class="s1">|</span>

  <span class="s2">示例代码</span>

<span class="s1">```</span><span class="s4">javascript</span>
<span class="s3">import { describe, it, expect, TestType, Size, Level } from '@ohos/hypium';</span>

<span class="s3">export default function attributeTest() {</span>
    <span class="s3">describe('attributeTest', function () {</span>
        <span class="s3">it(&quot;testAttributeIt&quot;, TestType.FUNCTION | Size.SMALLTEST | Level.LEVEL0, function () {</span>
            <span class="s3">console.info('Hello Test');</span>
        <span class="s3">})</span>
    <span class="s3">})</span>
<span class="s3">}</span>
<span class="s1">```</span>

  <span class="s2">示例命令</span>
<span class="s1">```</span><span class="s4">shell  </span>
<span class="s3">XX -s level 1 -s size small -s testType function</span>
<span class="s1">```</span>
<span class="s2">该命令的作用是：筛选测试应用中同时满足a）用例级别是1 b）用例粒度是small c）用例测试类型是function 三个条件的用例执行。</span>

<span class="s1">- </span><span class="s2">测试套/测试用例名称筛选能力（测试套与用例名称用“#”号连接，多个用“,”英文逗号分隔）</span>

<span class="s1">| </span><span class="s0">Key      </span><span class="s1">| </span><span class="s0">含义说明                </span><span class="s1">| </span><span class="s0">Value取值范围                                                                                </span><span class="s1">|</span>
<span class="s1">| -------- | ----------------------- | -------------------------------------------------------------------------------------------- |</span>
<span class="s1">| </span><span class="s0">class    </span><span class="s1">| </span><span class="s0">指定要执行的测试套&amp;用例 </span><span class="s1">| </span><span class="s0">${describeName}#${itName}，${describeName} , 例如：-s class attributeTest#testAttributeIt    </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">notClass </span><span class="s1">| </span><span class="s0">指定不执行的测试套&amp;用例 </span><span class="s1">| </span><span class="s0">${describeName}#${itName}，${describeName} , 例如：-s notClass attributeTest#testAttributeIt </span><span class="s1">|</span>

  <span class="s2">示例命令</span>
<span class="s1">```</span><span class="s4">shell  </span>
<span class="s3">XX -s class attributeTest#testAttributeIt,abilityTest#testAbilityIt</span>
<span class="s1">```</span>
<span class="s2">该命令的作用是：筛选测试应用中attributeTest测试套下的testAttributeIt测试用例，abilityTest测试套下的testAbilityIt测试用例，只执行这两条用例。</span>

<span class="s1">- </span><span class="s2">其他能力</span>

<span class="s1">| </span><span class="s0">能力项       </span><span class="s1">| </span><span class="s0">Key     </span><span class="s1">| </span><span class="s0">含义说明                     </span><span class="s1">| </span><span class="s0">Value取值范围                                  </span><span class="s1">|</span>
<span class="s1">| ------------ | ------- | ---------------------------- | ---------------------------------------------- |</span>
<span class="s1">| </span><span class="s0">随机执行能力 </span><span class="s1">| </span><span class="s0">random  </span><span class="s1">| </span><span class="s0">测试套&amp;测试用例随机执行      </span><span class="s1">| </span><span class="s0">true, 不传参默认为false， 例如：-s random true </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">空跑能力     </span><span class="s1">| </span><span class="s0">dryRun  </span><span class="s1">| </span><span class="s0">显示要执行的测试用例信息全集 </span><span class="s1">| </span><span class="s0">true , 不传参默认为false，例如：-s dryRun true </span><span class="s1">|</span>
<span class="s1">| </span><span class="s0">异步超时能力 </span><span class="s1">| </span><span class="s0">timeout </span><span class="s1">| </span><span class="s0">异步用例执行的超时时间       </span><span class="s1">| </span><span class="s0">正整数 , 单位ms，例如：-s timeout 5000         </span><span class="s1">|</span>

<span class="s1">##### </span><span class="s2">约束限制</span>
<span class="s2">随机执行能力和空跑能力从npm包1.0.3版本开始支持</span>

<span class="s1">#### </span><span class="s2">Mock能力</span>

<span class="s1">##### </span><span class="s2">约束限制</span>

<span class="s2">单元测试框架Mock能力从npm包</span><span class="s0">[</span><span class="s2">1.0.1版本</span><span class="s0">](</span><span class="s5">https://repo.harmonyos.com/#/cn/application/atomService/@ohos%2Fhypium/v/1.0.1</span><span class="s0">)</span><span class="s2">开始支持</span>

<span class="s1">## </span><span class="s2">约束</span>

<span class="s1">***</span>
    <span class="s3">本模块首批接口从OpenHarmony SDK API version 8开始支持。</span>

<span class="s1">## </span><span class="s2">Hypium开放能力隐私声明</span>

<span class="s1">-  </span><span class="s2">我们如何收集和使用您的个人信息</span>
	<span class="s2">您在使用集成了Hypium开放能力的测试应用时，Hypium不会处理您的个人信息。</span>
<span class="s1">-  </span><span class="s2">SDK处理的个人信息</span>
	<span class="s2">不涉及。</span>
<span class="s1">-  </span><span class="s2">SDK集成第三方服务声明</span>
	<span class="s2">不涉及。</span>
<span class="s1">-  </span><span class="s2">SDK数据安全保护</span>
	<span class="s2">不涉及。</span>
<span class="s1">-  </span><span class="s2">SDK版本更新声明</span>
	<span class="s2">为了向您提供最新的服务，我们会不时更新Hypium版本。我们强烈建议开发者集成使用最新版本的Hypium。</span>

</pre>
</body>
</html>